<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<style>
  /* يمنع تحديد النص */
  * {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    -webkit-tap-highlight-color: transparent; /* يمنع وميض التحديد عند اللمس */
  }

  /* يجعل التمرير سلس وثابت */
  html, body {
    overscroll-behavior: none;
    touch-action: manipulation;
  }
</style>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الجدول الدراسي - Six Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            background: linear-gradient(-45deg, #667eea, #764ba2, #6B8DD6, #8E37D7);
            background-size: 400% 400%;
            animation: gradientShift 12s ease infinite;
        }
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .glass-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
        }
        .progress-indicator {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.1);
            z-index: 0;
        }
        .progress-fill {
            position: absolute;
            top: 0;
            bottom: 0;
            right: 100%;
            width: 100%;
            background: rgba(102, 126, 234, 0.4);
            transition: right 0.5s ease;
            z-index: 1;
        }
        .task-row {
            position: relative;
            z-index: 2;
        }
        .completed {
            opacity: 0.6;
            text-decoration: line-through;
        }
        .time-marker {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #fbbf24;
            z-index: 3;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col overflow-x-hidden">
    <!-- Header -->
    <header class="relative z-10 p-6">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <a href="index.html" class="text-white">
                <i data-feather="arrow-right" class="w-6 h-6"></i>
            </a>
            <h1 class="text-2xl font-bold text-white">الجدول الدراسي</h1>
            <button id="toggle-schedule" class="text-white text-sm bg-indigo-600 px-3 py-1 rounded-full">
                تبديل الجدول
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-8 max-w-6xl relative z-10">
        <!-- Schedule Tabs -->
        <div class="flex border-b border-white/20 mb-6">
            <button id="masa-tab" class="px-4 py-2 text-white tab-active">جدول ماسا</button>
            <button id="shamiri-tab" class="px-4 py-2 text-purple-200">جدول شميري</button>
        </div>

        <!-- Masa Schedule Section -->
        <section id="masa-section">
            <div class="glass-card rounded-xl p-6 mb-6">
                <table class="min-w-full">
                    <thead>
                        <tr class="text-white">
                            <th class="p-3">الوقت</th>
                            <th class="p-3">المادة</th>
                            <th class="p-3">الإنجاز</th>
                        </tr>
                    </thead>
                    <tbody id="masa-schedule-body" class="divide-y divide-white/10">
                        <!-- Schedule rows will be inserted here -->
                    </tbody>
                </table>
            </div>
            <!-- Time Remaining -->
            <div class="glass-card rounded-xl p-6 text-center">
                <h3 class="font-medium text-white mb-1">الوقت المتبقي حتى نهاية اليوم</h3>
                <p id="masa-time-remaining" class="text-2xl font-bold text-blue-300">23:59:59</p>
            </div>
        </section>

        <!-- Shamiri Section -->
        <section id="shamiri-section" class="hidden">
            <div class="glass-card rounded-xl p-6 mb-6">
                <table class="min-w-full">
                    <thead>
                        <tr class="text-white">
                            <th class="p-3">الوقت</th>
                            <th class="p-3">المادة</th>
                            <th class="p-3">الإنجاز</th>
                        </tr>
                    </thead>
                    <tbody id="shamiri-schedule-body" class="divide-y divide-white/10">
                        <!-- Schedule rows will be inserted here -->
                    </tbody>
                </table>
            </div>
            <!-- Time Remaining -->
            <div class="glass-card rounded-xl p-6 text-center">
                <h3 class="font-medium text-white mb-1">الوقت المتبقي حتى نهاية اليوم</h3>
                <p id="shamiri-time-remaining" class="text-2xl font-bold text-green-300">23:59:59</p>
            </div>
        </section>
    </main>

    <script>
        // Initialize feather icons
        feather.replace();

        // الجداول
        const masaSchedule = {
            sunday: [
                { subject: "نوم: 10:30 م – 6:00 ص", start: "22:30", end: "06:00", completed: false, isSleep: true },
                { subject: "استيقاظ + صلاة الفجر + تجهيز", start: "06:00", end: "06:30", completed: false },
                { subject: "جلسة دراسية 1", start: "06:30", end: "07:15", completed: false },
                { subject: "استراحة", start: "07:15", end: "07:30", completed: false },
                { subject: "جلسة دراسية 2", start: "07:30", end: "08:15", completed: false },
                { subject: "استراحة", start: "08:15", end: "08:30", completed: false },
                { subject: "فطور (30 دقيقة)", start: "08:30", end: "09:00", completed: false },
                { subject: "جلسة دراسية 3", start: "09:00", end: "09:45", completed: false },
                { subject: "استراحة", start: "09:45", end: "10:00", completed: false },
                { subject: "جلسة دراسية 4", start: "10:00", end: "10:45", completed: false },
                { subject: "استراحة", start: "10:45", end: "11:00", completed: false },
                { subject: "الدوام + الصلوات + الغداء + الاستراحة", start: "11:00", end: "16:00", completed: false },
                { subject: "جلسة دراسية 5", start: "16:00", end: "16:45", completed: false },
                { subject: "استراحة", start: "16:45", end: "17:00", completed: false },
                { subject: "جلسة دراسية 6", start: "17:00", end: "17:45", completed: false },
                { subject: "استراحة", start: "17:45", end: "18:00", completed: false },
                { subject: "جلسة دراسية 7", start: "18:00", end: "18:45", completed: false },
                { subject: "صلاة المغرب + استراحة", start: "18:45", end: "19:00", completed: false },
                { subject: "جلسة دراسية 8", start: "19:00", end: "19:45", completed: false },
                { subject: "استراحة", start: "19:45", end: "20:00", completed: false },
                { subject: "جلسة دراسية 9", start: "20:00", end: "20:45", completed: false },
                { subject: "استراحة", start: "20:45", end: "21:00", completed: false },
                { subject: "جلسة دراسية 10", start: "21:00", end: "21:45", completed: false },
                { subject: "استراحة", start: "21:45", end: "22:00", completed: false },
                { subject: "جلسة دراسية 11 قصيرة", start: "22:00", end: "22:30", completed: false }
            ],
            monday: [
                { subject: "نوم: 10:30 م – 6:00 ص", start: "22:30", end: "06:00", completed: false, isSleep: true },
                { subject: "استيقاظ + صلاة الفجر + تجهيز", start: "06:00", end: "06:30", completed: false },
                { subject: "جلسة دراسية 1", start: "06:30", end: "07:15", completed: false },
                { subject: "استراحة", start: "07:15", end: "07:30", completed: false },
                { subject: "جلسة دراسية 2", start: "07:30", end: "08:15", completed: false },
                { subject: "استراحة", start: "08:15", end: "08:30", completed: false },
                { subject: "فطور (30 دقيقة)", start: "08:30", end: "09:00", completed: false },
                { subject: "جلسة دراسية 3", start: "09:00", end: "09:45", completed: false },
                { subject: "استراحة", start: "09:45", end: "10:00", completed: false },
                { subject: "جلسة دراسية 4", start: "10:00", end: "10:45", completed: false },
                { subject: "استراحة", start: "10:45", end: "11:00", completed: false },
                { subject: "الدوام + الصلوات + الغداء + الاستراحة", start: "11:00", end: "16:00", completed: false },
                { subject: "جلسة دراسية 5", start: "16:00", end: "16:45", completed: false },
                { subject: "استراحة", start: "16:45", end: "17:00", completed: false },
                { subject: "جلسة دراسية 6", start: "17:00", end: "17:45", completed: false },
                { subject: "استراحة", start: "17:45", end: "18:00", completed: false },
                { subject: "جلسة دراسية 7", start: "18:00", end: "18:45", completed: false },
                { subject: "صلاة المغرب + استراحة", start: "18:45", end: "19:00", completed: false },
                { subject: "جلسة دراسية 8", start: "19:00", end: "19:45", completed: false },
                { subject: "استراحة", start: "19:45", end: "20:00", completed: false },
                { subject: "جلسة دراسية 9", start: "20:00", end: "20:45", completed: false },
                { subject: "استراحة", start: "20:45", end: "21:00", completed: false },
                { subject: "جلسة دراسية 10", start: "21:00", end: "21:45", completed: false },
                { subject: "استراحة", start: "21:45", end: "22:00", completed: false },
                { subject: "جلسة دراسية 11 قصيرة", start: "22:00", end: "22:30", completed: false }
            ],
            tuesday: [
                { subject: "نوم: 10:30 م – 6:00 ص", start: "22:30", end: "06:00", completed: false, isSleep: true },
                { subject: "استيقاظ + صلاة الفجر + تجهيز", start: "06:00", end: "06:30", completed: false },
                { subject: "جلسة دراسية 1", start: "06:30", end: "07:15", completed: false },
                { subject: "استراحة", start: "07:15", end: "07:30", completed: false },
                { subject: "جلسة دراسية 2", start: "07:30", end: "08:15", completed: false },
                { subject: "استراحة", start: "08:15", end: "08:30", completed: false },
                { subject: "فطور (30 دقيقة)", start: "08:30", end: "09:00", completed: false },
                { subject: "جلسة دراسية 3", start: "09:00", end: "09:45", completed: false },
                { subject: "استراحة", start: "09:45", end: "10:00", completed: false },
                { subject: "جلسة دراسية 4", start: "10:00", end: "10:45", completed: false },
                { subject: "استراحة", start: "10:45", end: "11:00", completed: false },
                { subject: "الدوام + الصلوات + الغداء + الاستراحة", start: "11:00", end: "16:00", completed: false },
                { subject: "جلسة دراسية 5", start: "16:00", end: "16:45", completed: false },
                { subject: "استراحة", start: "16:45", end: "17:00", completed: false },
                { subject: "جلسة دراسية 6", start: "17:00", end: "17:45", completed: false },
                { subject: "استراحة", start: "17:45", end: "18:00", completed: false },
                { subject: "جلسة دراسية 7", start: "18:00", end: "18:45", completed: false },
                { subject: "صلاة المغرب + استراحة", start: "18:45", end: "19:00", completed: false },
                { subject: "جلسة دراسية 8", start: "19:00", end: "19:45", completed: false },
                { subject: "استراحة", start: "19:45", end: "20:00", completed: false },
                { subject: "جلسة دراسية 9", start: "20:00", end: "20:45", completed: false },
                { subject: "استراحة", start: "20:45", end: "21:00", completed: false },
                { subject: "جلسة دراسية 10", start: "21:00", end: "21:45", completed: false },
                { subject: "استراحة", start: "21:45", end: "22:00", completed: false },
                { subject: "جلسة دراسية 11 قصيرة", start: "22:00", end: "22:30", completed: false }
            ],
            wednesday: [
                { subject: "نوم: 10:30 م – 6:00 ص", start: "22:30", end: "06:00", completed: false, isSleep: true },
                { subject: "استيقاظ + صلاة الفجر + تجهيز", start: "06:00", end: "06:30", completed: false },
                { subject: "جلسة دراسية 1", start: "06:30", end: "07:15", completed: false },
                { subject: "استراحة", start: "07:15", end: "07:30", completed: false },
                { subject: "جلسة دراسية 2", start: "07:30", end: "08:15", completed: false },
                { subject: "استراحة", start: "08:15", end: "08:30", completed: false },
                { subject: "فطور (30 دقيقة)", start: "08:30", end: "09:00", completed: false },
                { subject: "جلسة دراسية 3", start: "09:00", end: "09:45", completed: false },
                { subject: "استراحة", start: "09:45", end: "10:00", completed: false },
                { subject: "جلسة دراسية 4", start: "10:00", end: "10:45", completed: false },
                { subject: "استراحة", start: "10:45", end: "11:00", completed: false },
                { subject: "الدوام + الصلوات + الغداء + الاستراحة", start: "11:00", end: "16:00", completed: false },
                { subject: "جلسة دراسية 5", start: "16:00", end: "16:45", completed: false },
                { subject: "استراحة", start: "16:45", end: "17:00", completed: false },
                { subject: "جلسة دراسية 6", start: "17:00", end: "17:45", completed: false },
                { subject: "استراحة", start: "17:45", end: "18:00", completed: false },
                { subject: "جلسة دراسية 7", start: "18:00", end: "18:45", completed: false },
                { subject: "صلاة المغرب + استراحة", start: "18:45", end: "19:00", completed: false },
                { subject: "جلسة دراسية 8", start: "19:00", end: "19:45", completed: false },
                { subject: "استراحة", start: "19:45", end: "20:00", completed: false },
                { subject: "جلسة دراسية 9", start: "20:00", end: "20:45", completed: false },
                { subject: "استراحة", start: "20:45", end: "21:00", completed: false },
                { subject: "جلسة دراسية 10", start: "21:00", end: "21:45", completed: false },
                { subject: "استراحة", start: "21:45", end: "22:00", completed: false },
                { subject: "جلسة دراسية 11 قصيرة", start: "22:00", end: "22:30", completed: false }
            ]
        };

        const shamiriSchedule = [
            { subject: "جلسة دراسية (كيمياء)", start: "15:00", end: "15:45", completed: false },
            { subject: "استراحة", start: "15:45", end: "16:00", completed: false },
            { subject: "صلاة العصر + استراحة", start: "16:00", end: "16:15", completed: false },
            { subject: "جلسة دراسية (فيزياء)", start: "16:15", end: "17:00", completed: false },
            { subject: "استراحة", start: "17:00", end: "17:15", completed: false },
            { subject: "جلسة دراسية (أحياء)", start: "17:15", end: "18:00", completed: false },
            { subject: "استراحة", start: "18:00", end: "18:15", completed: false },
            { subject: "حل أسئلة", start: "18:15", end: "19:00", completed: false },
            { subject: "استراحة + صلاة المغرب", start: "19:00", end: "19:15", completed: false },
            { subject: "دراسة اللغة (الإنجليزي)", start: "19:15", end: "20:00", completed: false },
            { subject: "استراحة", start: "20:00", end: "20:15", completed: false },
            { subject: "دراسة اللغة (العربي)", start: "20:15", end: "21:00", completed: false },
            { subject: "استراحة + صلاة العشاء", start: "21:00", end: "21:15", completed: false },
            { subject: "مراجعة + حفظ الصيغ", start: "21:15", end: "22:00", completed: false }
        ];

        // عرض الجدول
        function renderSchedule(schedule, containerId, timeRemainingId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';

            const now = new Date();
            const currentTime = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;

            schedule.forEach(task => {
                const row = document.createElement('tr');
                row.className = `task-row ${task.completed ? 'completed' : ''}`;

                const start = task.start;
                const end = task.end;

                // مؤشر التقدم
                const startMinutes = timeToMinutes(start);
                const endMinutes = timeToMinutes(end);
                const nowMinutes = timeToMinutes(currentTime);
                let progressStyle = '';
                if (nowMinutes > startMinutes && nowMinutes < endMinutes) {
                    progressStyle = 'bg-yellow-500/30';
                } else if (nowMinutes >= endMinutes) {
                    progressStyle = 'bg-green-500/30';
                }

                row.innerHTML = `
                    <td class="p-3 text-center text-white">${start} – ${end}</td>
                    <td class="p-3 text-center text-white ${task.isSleep ? 'text-gray-400 italic' : ''}">${task.subject}</td>
                    <td class="p-3 text-center">
                        <input type="checkbox" ${task.completed ? 'checked' : ''} onchange="toggleTask(${JSON.stringify(task).replace(/"/g, '&quot;')}, this)" class="rounded text-indigo-600">
                    </td>
                `;
                container.appendChild(row);
            });

            updateTimeRemaining(timeRemainingId);
        }

        // تحويل الوقت إلى دقائق
        function timeToMinutes(time) {
            const [hours, minutes] = time.split(':').map(Number);
            return hours * 60 + minutes;
        }

        // تبديل حالة المهمة
        function toggleTask(task, checkbox) {
            task.completed = checkbox.checked;
            const row = checkbox.closest('tr');
            if (task.completed) {
                row.classList.add('completed');
            } else {
                row.classList.remove('completed');
            }
            saveSchedules();
        }

        // تحديث الوقت المتبقي
        function updateTimeRemaining(timeRemainingId) {
            const now = new Date();
            const totalMinutes = now.getHours() * 60 + now.getMinutes();
            const secondsUntilEnd = (24 * 60 * 60) - (totalMinutes * 60 + now.getSeconds());
            const hoursLeft = Math.floor(secondsUntilEnd / 3600);
            const minutesLeft = Math.floor((secondsUntilEnd % 3600) / 60);
            const secondsLeft = secondsUntilEnd % 60;

            document.getElementById(timeRemainingId).textContent = 
                `${hoursLeft.toString().padStart(2, '0')}:${minutesLeft.toString().padStart(2, '0')}:${secondsLeft.toString().padStart(2, '0')}`;
        }

        // تبديل الجدول
        document.getElementById('toggle-schedule').addEventListener('click', () => {
            const masaSection = document.getElementById('masa-section');
            const shamiriSection = document.getElementById('shamiri-section');
            if (masaSection.classList.contains('hidden')) {
                masaSection.classList.remove('hidden');
                shamiriSection.classList.add('hidden');
            } else {
                masaSection.classList.add('hidden');
                shamiriSection.classList.remove('hidden');
            }
        });

        // تبديل الجداول من خلال الألسنة
        document.getElementById('masa-tab').addEventListener('click', () => {
            document.getElementById('masa-section').classList.remove('hidden');
            document.getElementById('shamiri-section').classList.add('hidden');
        });

        document.getElementById('shamiri-tab').addEventListener('click', () => {
            document.getElementById('shamiri-section').classList.remove('hidden');
            document.getElementById('masa-section').classList.add('hidden');
        });

        // حفظ الجداول في localStorage
        function saveSchedules() {
            localStorage.setItem('masaSchedule', JSON.stringify(masaSchedule));
            localStorage.setItem('shamiriSchedule', JSON.stringify(shamiriSchedule));
        }

        // تحميل الجداول من localStorage
        function loadSchedules() {
            const savedMasa = localStorage.getItem('masaSchedule');
            const savedShamiri = localStorage.getItem('shamiriSchedule');
            if (savedMasa) {
                Object.assign(masaSchedule, JSON.parse(savedMasa));
            }
            if (savedShamiri) {
                Object.assign(shamiriSchedule, JSON.parse(savedShamiri));
            }
        }

        // تحديث الجداول عند تحميل الصفحة
        document.addEventListener('DOMContentLoaded', () => {
            loadSchedules();
            const today = new Date().toLocaleDateString('en-US', { weekday: 'long' }).toLowerCase();
            const scheduleForToday = masaSchedule[today] || masaSchedule.sunday;
            renderSchedule(scheduleForToday, 'masa-schedule-body', 'masa-time-remaining');
            renderSchedule(shamiriSchedule, 'shamiri-schedule-body', 'shamiri-time-remaining');
        });
    </script>
</body>
</html>
